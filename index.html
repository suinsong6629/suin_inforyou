<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¯¸ë˜ì „ëµ ì‚¬ì—…ë‹¨ V16.2</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Gowun+Dodum:wght@400;700&display=swap');
        
        :root {
            --bg-gradient: linear-gradient(135deg, #dce4ff 0%, #f1f5f9 50%, #ffe4e6 100%);
            --glass: rgba(255, 255, 255, 0.75);
            --glass-border: rgba(255, 255, 255, 0.4);
            --primary: #3182f6;
            --red: #fb7185;
            --text-main: #191f28;
            --text-sub: #4e5968;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.05);
            --c-purple: rgba(168, 85, 247, 0.15);
            --c-orange: rgba(249, 115, 22, 0.15);
            --c-blue: rgba(59, 130, 246, 0.15);
            --c-green: rgba(16, 185, 129, 0.15);
        }

        body.dark-mode {
            --bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            --glass: rgba(30, 41, 59, 0.7);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #f8fafc;
            --text-sub: #94a3b8;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        /* ğŸš¨ ì‚¬ì´íŠ¸ ì ê¸ˆ ë ˆì´ì–´ */
        body.is-locked #main-wrapper { filter: blur(25px); pointer-events: none; }
        #lock-screen {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 20000; flex-direction: column; 
            align-items: center; justify-content: center; color: white; text-align: center;
        }
        body.is-locked #lock-screen { display: flex; }

        * { font-family: 'Gowun Dodum', sans-serif !important; box-sizing: border-box; transition: background 0.3s, color 0.3s; }
        body { background: var(--bg-gradient); background-attachment: fixed; min-height: 100vh; margin: 0; display: flex; justify-content: center; align-items: flex-start; padding: 40px 20px; color: var(--text-main); }

        #main-wrapper { width: 100%; max-width: 1200px; display: flex; flex-direction: column; gap: 20px; }

        /* ğŸ”’ ê²Œì´íŠ¸í‚¤í¼ */
        #gatekeeper {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-gradient); display: flex; align-items: center; justify-content: center; z-index: 10000;
        }
        .lock-card {
            background: var(--glass); padding: 50px; border-radius: 30px;
            box-shadow: var(--shadow); text-align: center; width: 100%; max-width: 420px;
            border: 1px solid var(--glass-border); backdrop-filter: blur(15px);
        }

        #main-app { display: none; flex-direction: column; gap: 20px; width: 100%; }
        .glass-card { background: var(--glass); border-radius: 24px; padding: 25px; box-shadow: var(--shadow); border: 1px solid var(--glass-border); backdrop-filter: blur(20px); }
        
        /* ğŸŒ¤ï¸ ëŒ€ì‹œë³´ë“œ UI */
        .dashboard-grid { display: grid; grid-template-columns: 280px 1fr 145px; gap: 20px; align-items: stretch; }
        .weather-info { display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 12px; text-align: center; height: 100%; }
        #we-icon { font-size: 55px; margin: 5px 0; }
        #cur-time { font-size: 38px; font-weight: 800; color: var(--primary); margin: 5px 0; }
        #cur-date { font-size: 15px; color: var(--text-sub); }
        #we-temp { font-size: 24px; font-weight: 700; }

        .shortcut-group { display: flex; flex-direction: column; gap: 8px; }
        .side-btn { width: 100%; flex: 1; border-radius: 20px; text-decoration: none; font-size: 14px; font-weight: 700; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(255,255,255,0.2); }
        .btn-erp { background: var(--c-purple); color: #7c3aed; }
        .btn-gap { background: var(--c-orange); color: #ea580c; }
        .btn-check { background: var(--c-green); color: #10b981; }
        .btn-mohom { background: var(--c-blue); color: #3b82f6; }

        .calendar-table { width: 100%; border-collapse: separate; border-spacing: 2px; table-layout: fixed; }
        .calendar-td { height: 80px; vertical-align: top; padding: 8px; border: 1px solid rgba(125,125,125,0.1); border-radius: 10px; position: relative; background: rgba(255,255,255,0.2); }
        .day-num { font-weight: 700; font-size: 12px; }
        .event-bar { position: absolute; left: 0; right: 0; top: 32px; height: 20px; background: rgba(251, 113, 133, 0.2); border-bottom: 2.5px solid var(--red); font-size: 11px; font-weight: 700; color: #b91c1c; display: flex; align-items: center; justify-content: center; overflow: hidden; white-space: nowrap; }
        body.dark-mode .event-bar { color: #fff; }
        .today { background: rgba(49, 130, 246, 0.15) !important; outline: 2px solid var(--primary) !important; outline-offset: -2px; }

        input, select { width: 100%; padding: 14px; border-radius: 12px; border: 1px solid rgba(125,125,125,0.2); margin-bottom: 12px; background: rgba(255,255,255,0.5); color: inherit; outline: none; }
        input:focus { border-color: var(--primary); background: rgba(255,255,255,0.8); }
        .btn-main { background: var(--primary); color: white; border: none; padding: 15px; border-radius: 12px; cursor: pointer; font-weight: 700; font-size: 16px; }
        .btn-main:hover { background: #1b64da; transform: translateY(-1px); }

        .results-table { width: 100%; border-collapse: collapse; min-width: 1000px; margin-top: 15px; }
        .results-table th { background: rgba(0,0,0,0.05); padding: 12px; text-align: left; font-size: 13px; color: var(--text-sub); }
        .results-table td { padding: 12px; border-bottom: 1px solid rgba(125,125,125,0.1); font-size: 14px; }
        
        .two-cols { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .error-msg { background: #fff1f2; color: #be123c; padding: 14px; border-radius: 12px; font-size: 13px; margin-top: 15px; border-left: 4px solid #fb7185; font-weight: 700; }
    </style>
</head>
<body>

<div id="lock-screen">
    <div style="font-size: 80px; margin-bottom: 20px;">ğŸ”’</div>
    <h1 style="font-size: 36px; margin-bottom: 15px;">ì‚¬ì´íŠ¸ ì ê¹€</h1>
    <p style="font-size: 18px; line-height: 1.6; opacity: 0.9;">ë³´ì•ˆ ì •ì±…ì— ë”°ë¼ ì‹œìŠ¤í…œ ì ‘ê·¼ì´ ì¼ì‹œ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.<br>ê´€ë¦¬ìê°€ ì•”í˜¸ë¥¼ ë³€ê²½í•œ í›„ ë‹¤ì‹œ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
</div>

<div id="main-wrapper">
    <div id="gatekeeper">
        <div class="lock-card">
            <div style="font-size: 60px; margin-bottom: 20px;">ğŸ›¡ï¸</div>
            <h2 style="margin-bottom: 10px;">ì‹œìŠ¤í…œ ë³´ì•ˆ ì¸ì¦</h2>
            <p style="color:var(--text-sub); margin-bottom: 30px; font-size: 14px;">ë³¸ ì‹œìŠ¤í…œì€ ìŠ¹ì¸ëœ ì‚¬ìš©ì ì „ìš©ì…ë‹ˆë‹¤.</p>
            <input type="password" id="entry-pass" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" onkeypress="if(event.keyCode==13) tryAccess()">
            <button class="btn-main" style="width:100%" id="access-btn" onclick="tryAccess()">ë³´ì•ˆ ì ‘ì† ì‹œì‘</button>
            <div id="lock-error-area"></div>
        </div>
    </div>

    <div id="main-app">
        <div style="display:flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <h1 style="font-size: 26px; color: var(--primary); margin: 0;">ë¯¸ë˜ì „ëµ ì‚¬ì—…ë‹¨ í†µí•© ì‹œìŠ¤í…œ</h1>
            <div style="display: flex; align-items: center; gap: 20px;">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 12px; font-weight: 700;">ë‹¤í¬ ëª¨ë“œ</span>
                    <label class="switch"><input type="checkbox" id="darkToggle"><span class="slider"></span></label>
                </div>
                <button onclick="location.reload()" style="background:#eee; border:none; padding:8px 15px; border-radius:10px; cursor:pointer; font-size:12px; color: #333; font-weight: 700;">ë³´ì•ˆ ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>

        <!-- ğŸ—“ï¸ ëŒ€ì‹œë³´ë“œ -->
        <div class="dashboard-grid">
            <div class="glass-card">
                <div class="weather-info">
                    <div id="cur-date"></div>
                    <div id="cur-time"></div>
                    <div id="we-icon">â˜€ï¸</div> 
                    <span id="we-temp">--Â°C</span>
                    <div id="weather-desc" style="font-size: 13px; color: var(--text-sub); margin-top: 5px;">ë‚ ì”¨ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                </div>
            </div>
            <div class="glass-card" style="padding: 18px;">
                <div id="cal-title" style="font-weight: 800; text-align: center; margin-bottom: 12px; font-size: 16px;"></div>
                <table class="calendar-table">
                    <thead><tr style="font-size: 11px; height: 25px; text-align: center;"><th style="color:var(--red)">ì¼</th><th>ì›”</th><th>í™”</th><th>ìˆ˜</th><th>ëª©</th><th>ê¸ˆ</th><th style="color:var(--primary)">í† </th></tr></thead>
                    <tbody id="cal-body-content"></tbody>
                </table>
            </div>
            <div class="shortcut-group">
                <a href="https://infis-erp.co.kr/" target="_blank" class="side-btn btn-erp">ERP</a>
                <a href="http://chrurck.com/?act=info.page&pcode=sub1_3" target="_blank" class="side-btn btn-gap">ì´ˆê²©ì°¨</a>
                <a href="https://pcs.iaa.or.kr/comm/login.do" target="_blank" class="side-btn btn-check">ë¹„êµí™•ì¸</a>
                <a href="https://www.mohom.kr/" target="_blank" class="side-btn btn-mohom">ëª¨í™ˆ</a>
            </div>
        </div>

        <!-- ğŸ” í†µí•© ì¡°íšŒ -->
        <div class="glass-card">
            <div style="font-size:20px; font-weight:700; margin-bottom:15px; display: flex; align-items: center; gap: 8px;">ğŸ” í†µí•© ê³ ê° ì¡°íšŒ</div>
            <div style="display:grid; grid-template-columns: 1fr 150px; gap:12px;">
                <input type="text" id="searchName" placeholder="ê³ ê° ì„±í•¨ì„ ì…ë ¥í•˜ì„¸ìš”" style="margin-bottom:0;" onkeypress="if(event.keyCode==13) findCustomer()">
                <button class="btn-main" onclick="findCustomer()">ë°ì´í„° ì¡°íšŒ</button>
            </div>
            <div id="searchStatus" style="margin-top:15px; font-weight:700; font-size:14px; color: var(--primary);">ì„±í•¨ì„ ì…ë ¥í•˜ê³  ì¡°íšŒë¥¼ ëˆ„ë¥´ì„¸ìš”.</div>
            <div id="searchResultArea" style="display:none; overflow-x:auto;">
                <table class="results-table">
                    <thead><tr><th>ì·¨ê¸‰ì</th><th>ì´ë¦„</th><th>ì£¼ë¯¼ë²ˆí˜¸</th><th>ì—°ë½ì²˜</th><th>ì£¼ì†Œ</th><th>ì§ì—…</th><th>ê³„ì¢Œì •ë³´</th></tr></thead>
                    <tbody id="resultTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- ğŸ“‚ ì„œë¥˜ ìƒì„± -->
        <div class="two-cols">
            <div class="glass-card">
                <div style="font-size:18px; font-weight:700; margin-bottom:15px;">ğŸ“‚ ì„œë¥˜ ì—…ë¡œë“œ (PDF)</div>
                <label style="display:block; font-size:12px; font-weight:700; margin-bottom: 5px;">ê³ ì§€ì˜ë¬´ ì´í–‰í™•ì¸ì„œ</label>
                <input type="file" id="f1" accept=".pdf" onchange="keepFile(1)">
                <label style="display:block; margin-top:10px; font-size:12px; font-weight:700; margin-bottom: 5px;">í•„ìˆ˜ ë™ì˜ì„œ</label>
                <input type="file" id="f2" accept=".pdf" onchange="keepFile(2)">
            </div>
            <div class="glass-card">
                <div style="font-size:18px; font-weight:700; margin-bottom:15px;">ğŸ‘¤ ê¸°ì¬ ì •ë³´ ë° ì „ì†¡</div>
                <label style="display:block; font-size:12px; font-weight:700; margin-bottom: 5px;">ê³„ì•½ ì²´ê²°ì¼</label>
                <input type="date" id="cDate">
                <div class="two-cols" style="margin-top: 5px;">
                    <div><label style="font-size:11px; font-weight:700;">ë‹´ë‹¹ ì„¤ê³„ì‚¬</label><input type="text" id="pName" placeholder="ì„±í•¨"></div>
                    <div><label style="font-size:11px; font-weight:700;">ê³„ì•½ì ì„±ëª…</label><input type="text" id="uName" placeholder="ì„±í•¨"></div>
                </div>
                <button class="btn-main" style="width:100%; height:50px; margin-top:10px;" id="process-btn" onclick="startProcess()">ğŸ“¤ ì„œë¥˜ ìƒì„± ë° ë“œë¼ì´ë¸Œ ì „ì†¡</button>
                <div id="processStatus" style="text-align:center; margin-top:12px; font-weight:700; font-size:13px;"></div>
            </div>
        </div>
    </div>
</div>

<canvas id="pdf-canvas" style="display:none;"></canvas>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

<script>
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxKuInYyTnY8vp_8gCVgW17givSBKO27k_JcO2cdtovMlzDBa2Fxh9Q4MJwkRQ8BsV1lA/exec';
    const W_API_KEY = 'e9e4b4788a9cb01857b3d430b6551c24';
    let sessionKey = ""; 

    const $ = id => document.getElementById(id);

    window.onload = () => {
        const darkToggle = $('darkToggle');
        darkToggle.addEventListener('change', () => document.body.classList.toggle('dark-mode'));
    };

    async function tryAccess() {
        const pass = $('entry-pass').value.trim();
        if(!pass) return;
        $('access-btn').disabled = true;
        $('access-btn').innerText = "ë³´ì•ˆ ì¸ì¦ ì¤‘...";
        
        try {
            const res = await fetch(`${SCRIPT_URL}?action=auth&key=${encodeURIComponent(pass)}`);
            const data = await res.json();
            
            if(data[0] && data[0].error === "SITE_LOCKED") {
                document.body.classList.add('is-locked');
                $('gatekeeper').style.display = 'none';
                return;
            }

            if(data.status === "success") {
                sessionKey = pass;
                unlockApp();
            } else {
                $('lock-error-area').innerHTML = `<p class="error-msg">${data[0].error}</p>`;
                $('entry-pass').value = "";
                $('access-btn').disabled = false;
                $('access-btn').innerText = "ë³´ì•ˆ ì ‘ì† ì‹œì‘";
            }
        } catch(e) {
            $('lock-error-area').innerHTML = `<p class="error-msg">âš ï¸ ì„œë²„ ì—°ê²° ì˜¤ë¥˜</p>`;
            $('access-btn').disabled = false;
        }
    }

    function unlockApp() {
        $('gatekeeper').style.display = 'none';
        $('main-app').style.display = 'flex';
        updateClock(); setInterval(updateClock, 1000); fetchWeather(); drawCal();
    }

    function updateClock() {
        const n = new Date();
        const days = ["ì¼", "ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ", "í† "];
        $('cur-date').innerText = `${n.getFullYear()}ë…„ ${n.getMonth()+1}ì›” ${n.getDate()}ì¼ (${days[n.getDay()]})`;
        let hrs = n.getHours();
        const ampm = hrs >= 12 ? 'PM' : 'AM';
        hrs = hrs % 12 || 12;
        $('cur-time').innerText = `${ampm} ${hrs}:${String(n.getMinutes()).padStart(2, '0')}:${String(n.getSeconds()).padStart(2, '0')}`;
    }

    async function fetchWeather() {
        try {
            const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=Seoul&appid=${W_API_KEY}&units=metric&lang=kr`);
            const d = await res.json();
            $('we-temp').innerText = `${Math.round(d.main.temp)}Â°C`;
            $('weather-desc').innerText = d.weather[0].description;
            const icon = d.weather[0].icon;
            $('we-icon').innerText = icon.includes('01') ? 'â˜€ï¸' : (icon.includes('02') || icon.includes('03') ? 'â›…' : 'â˜ï¸');
        } catch (e) {}
    }

    function drawCal() {
        const y = 2026, m = 0; const n = new Date();
        $('cal-title').innerText = `${y}ë…„ ${m + 1}ì›”`;
        const firstDay = new Date(y, m, 1).getDay();
        const lastDate = new Date(y, m + 1, 0).getDate();
        let html = '<tr>';
        
        // ì´ì „ ë²„ì „ì˜ ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤íŠ¸ ë³µêµ¬
        const events = [
            { start: '2026-01-01', end: '2026-01-01', text: 'ì‹ ì •' },
            { start: '2026-01-16', end: '2026-01-16', text: 'ìˆ˜ì¸ íœ´ê°€' },
            { start: '2026-01-19', end: '2026-01-19', text: 'í•˜ê²½ íœ´ê°€' },
            { start: '2026-01-23', end: '2026-01-23', text: 'ìˆ˜ì¸ íœ´ê°€' },
            { start: '2026-01-26', end: '2026-01-30', text: 'í•˜ê²½ íœ´ê°€' },
            { start: '2026-01-31', end: '2026-01-31', text: 'í•˜ê²½ í‡´ì‚¬' }
        ];

        for(let i=0; i<firstDay; i++) html += '<td class="calendar-td"></td>';
        for(let d=1; d<=lastDate; d++) {
            const curIdx = (firstDay + d - 1) % 7;
            if (d > 1 && curIdx === 0) html += '</tr><tr>';
            const dateStr = `${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
            const isToday = (d === n.getDate() && m === n.getMonth() && y === n.getFullYear()) ? 'today' : '';
            
            let evHtml = '';
            events.forEach(ev => {
                // ê¸°ê°„ ê²€ìƒ‰ ë¡œì§ ë³µêµ¬ (V15.1 ê¸°ì¤€)
                if (dateStr >= ev.start && dateStr <= ev.end) {
                    // ì‹œì‘ì¼ì´ê±°ë‚˜ í•œ ì£¼ì˜ ì‹œì‘(ì¼ìš”ì¼)ì¼ ë•Œë§Œ í…ìŠ¤íŠ¸ í‘œì‹œ
                    const txt = (dateStr === ev.start || curIdx === 0) ? ev.text : '';
                    evHtml += `<div class="event-bar">${txt}</div>`;
                }
            });
            
            html += `<td class="calendar-td ${isToday}"><span class="day-num">${d}</span>${evHtml}</td>`;
        }
        $('cal-body-content').innerHTML = html + '</tr>';
    }

    async function findCustomer() {
        const name = $('searchName').value.trim();
        if(!name) return;
        $('searchStatus').innerText = "ğŸ” í†µí•© ê²€ìƒ‰ ì¤‘...";
        try {
            const res = await fetch(`${SCRIPT_URL}?action=search&name=${encodeURIComponent(name)}&key=${encodeURIComponent(sessionKey)}`);
            const results = await res.json();
            if(results[0] && results[0].error === "SITE_LOCKED") { document.body.classList.add('is-locked'); return; }
            if(results[0] && results[0].error) { location.reload(); return; }
            const tbody = $('resultTableBody'); tbody.innerHTML = '';
            if(!results || results.length === 0) { $('searchStatus').innerText = `âŒ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.`; $('searchResultArea').style.display = 'none'; return; }
            results.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `<td>${item.handler}</td><td style="font-weight:700;">${item.name}</td><td>${item.residentId}</td><td>${item.phone}</td><td>${item.address}</td><td>${item.job}</td><td>${item.account}</td>`;
                tbody.appendChild(tr);
            });
            $('searchResultArea').style.display = 'block';
            $('searchStatus').innerText = `âœ… ì¡°íšŒ ì™„ë£Œ`;
        } catch(e) { $('searchStatus').innerText = "âŒ ì¡°íšŒ ì˜¤ë¥˜"; }
    }

    let uploadedFiles = [null, null];
    function keepFile(n) { const f = $('f'+n).files[0]; if(f) uploadedFiles[n-1] = f; }

    async function startProcess() {
        const dVal = $('cDate').value; const uN = $('uName').value.trim(); const pN = $('pName').value.trim();
        if (!uploadedFiles[0] || !uploadedFiles[1] || !dVal || !uN || !pN) return alert("í•„ìˆ˜ ì •ë³´ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤.");
        $('process-btn').disabled = true; $('processStatus').innerText = "ğŸš€ ë“œë¼ì´ë¸Œ ì „ì†¡ ì¤‘...";
        try {
            const dt = new Date(dVal);
            const dObj = { y: dt.getFullYear().toString().slice(-2), m: (dt.getMonth()+1).toString(), day: dt.getDate().toString() };
            const i1 = await renderPdf(uploadedFiles[0], "ê³ ", dObj, uN, pN);
            const i2 = await renderPdf(uploadedFiles[1], "ë™", dObj, uN, pN);
            await fetch(SCRIPT_URL, { method: 'POST', mode: 'no-cors', body: JSON.stringify({ file1Data: i1, fileName1: `${uN}_ê³ .jpg`, file2Data: i2, fileName2: `${uN}_ë™.jpg` }) });
            $('processStatus').innerText = "âœ… ì „ì†¡ ì™„ë£Œ!";
        } catch (e) { $('processStatus').innerText = "âŒ ì „ì†¡ ì‹¤íŒ¨"; } finally { $('process-btn').disabled = false; }
    }

    async function renderPdf(file, type, dy, n, p) {
        const canvas = document.createElement('canvas');
        const pdf = await pdfjsLib.getDocument({ data: await file.arrayBuffer() }).promise;
        const page = await pdf.getPage(1);
        const viewport = page.getViewport({ scale: 2.0 });
        const ctx = canvas.getContext('2d');
        canvas.width = viewport.width; canvas.height = viewport.height;
        ctx.fillStyle = "#fff"; ctx.fillRect(0, 0, canvas.width, canvas.height);
        await page.render({ canvasContext: ctx, viewport: viewport }).promise;
        const s = 2.0; const h = viewport.height;
        const drawText = (t, x, y, sz=13) => { ctx.font = `${sz*s}px 'Malgun Gothic'`; ctx.fillStyle = "#000"; ctx.fillText(t, x*s, h-(y*s)); };
        const drawCheck = (x, y) => { ctx.font = `bold ${22*s}px Arial`; ctx.fillStyle = "red"; ctx.textAlign = "center"; ctx.fillText("v", x*s, h-(y*s)); ctx.textAlign = "start"; };
        if(type === "ê³ ") {
            [612, 579, 548, 504, 445, 385, 340, 310, 273].forEach(y => drawCheck(500, y));
            drawText(dy.y, 199, 209); drawText(dy.m, 230, 209); drawText(dy.day, 256, 209); drawText(n, 431, 209); drawText(n, 500, 209);
            drawText(dy.y, 200, 96); drawText(dy.m, 225, 96); drawText(dy.day, 250, 96); drawText(p, 430, 96); drawText(p, 505, 96);
        } else {
            [640, 545, 428, 310, 234].forEach(y => drawCheck(522, y));
            drawText(dy.y, 254, 138); drawText(dy.m, 300, 138); drawText(dy.day, 341, 138); drawText(n, 150, 107); drawText(n, 239, 107);
            drawText("ë¯¸ë˜ì „ëµì‚¬ì—…ë‹¨", 150, 58); drawText(p, 416, 64); drawText(p, 500, 64);
        }
        return canvas.toDataURL('image/jpeg', 0.9);
    }
</script>
</body>
</html>
